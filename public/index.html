<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title><%= htmlWebpackPlugin.options.title %></title>
    <script type="text/javascript">
      window._AMapSecurityConfig = {
        securityJsCode: "f37b8531a45506836a61ae8562a1b080" // 安全密钥
      };
    </script>

<!-- <link rel="stylesheet" href="./static/WSPlayer/player.css">
<script type="text/javascript" src="./static/WSPlayer/PlayerControl.js"></script>
<script type="text/javascript" src="./static/WSPlayer/WSPlayer.js"></script>
<script type="text/javascript" src="/static/jquery-3.6.0.min.js"></script> -->
  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>

    <!-- <video id="testVideo"></video>
    <canvas id="testCanvas"></canvas> -->


    <script src="./module/PlayerControl.js"></script>

    <script type="text/javascript">
              
      function a() {
        // console.log(RPC);
        // console.log(Object.getPrototypeOf(RPC));
        // console.log(Object.getPrototypeOf(RPC).login);

        let target = '10.50.7.202:80'
        setIP(target)



        var options = {
          wsURL: 'ws://10.50.7.202:80/rtspoverwebsocket',
          rtspURL: 'rtsp://10.50.7.202:80/cam/realmonitor?channel=1&subtype=0&proto=Private3',
          username: 'admin',
          password: 'Admin123',
        };


        var videoplayerObj = document.getElementById('testVideo')
        var canvasplayerObj = document.getElementById('testCanvas')

        var player = new PlayerControl(options);

        window.player = player

        player.on('PlayStart', function (e) {
          console.log(e);
        });

        player.on('WorkerReady',function(){//当文件准备完成后，开始拉流。
          console.log(111)
          player.connect();
        });

        console.log(player)

        player.init(canvasplayerObj, videoplayerObj);


        // RPC.login('admin', 'Admin123', false).then(res => {
        // RPC.login('admin', 'Admin123', false).then(res => {
        //   console.log(res)
        //   console.log(222)
        //   RPC.keepAlive(300, 60000, _getSession(), target);
        //   pubsub.subscribe('onbeforeunload',() => {
        //         // 通过 HTTP POST 将少量数据 异步 传输到 Web 服务器(要被发送到的网络地址, )
        //         navigator.sendBeacon('/RPC2', JSON.stringify(params));
        //     });
        // })

        // console.log(RPC.login('admin', 'Admin123', false))

        // console.log(setIP);

        // console.log(RPC);
        // console.log(Object.getPrototypeOf(RPC).login);
        // console.log(Object.getPrototypeOf(RPC).login);
      }
      // a()
    </script>

  </body>
</html>
